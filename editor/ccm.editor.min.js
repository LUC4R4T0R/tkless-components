(function(){const component={name:"editor",ccm:"https://ccmjs.github.io/ccm/ccm.js",config:{editor:["ccm.load","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/darcula.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js","https://ccmjs.github.io/tkless-components/libs/quill/quill.js","https://cdn.quilljs.com/1.2.0/quill.snow.css","https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css","https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"],settings:{modules:{toolbar:[[{header:[1,2,3,4,5,6,false]}],["bold","italic","underline"],["image","video","formula"]]},placeholder:"Write here...",theme:"snow"},embed_content:true,helper:["ccm.load","https://ccmjs.github.io/akless-components/modules/versions/helper-4.0.1.mjs"],icon:["ccm.load","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css",{context:"head",url:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"}]},Instance:function(){let $,quill,data;this.ready=(async()=>{$=Object.assign({},this.ccm.helper,this.helper);if(window.hljs)hljs.initHighlightingOnLoad()});this.start=(async()=>{let div=$.html({});$.setContent(this.element,div);quill=new Quill(div,this.settings);if(window.hljs&&this.settings.modules.syntax){const code_block=this.element.querySelector(".ql-code-block");code_block.addEventListener("click",()=>{window.hljs.highlightBlock(this.element.querySelector("div[contenteditable=true] > pre"))})}if(this.embed_content){this.element.querySelector(".ql-toolbar").appendChild($.html({tag:"span",class:"ql-formats",inner:{tag:"button",id:"custom-button",inner:"<i class ='far fa-file-code' style='font-size: 1rem;'></i>"}}));let BlockEmbed=Quill.import("blots/block/embed");class EmbedContent extends BlockEmbed{static create(value){let node=super.create(value);node.setAttribute("srcdoc",value);node.setAttribute("frameborder","0");node.setAttribute("allowfullscreen",true);node.setAttribute("width","100%");return node}static value(node){return node.getAttribute("srcdoc")}}EmbedContent.blotName="embed-content";EmbedContent.className="ql-embed-content";EmbedContent.tagName="iframe";Quill.register(EmbedContent,true);let customButton=this.element.querySelector("#custom-button");customButton.addEventListener("click",function(){const embed_code=prompt("Please enter your Embed Code below");if(embed_code!==""){let selection=quill.getSelection(true).index;quill.insertEmbed(selection,"embed-content",embed_code)}})}if(this.data){data=await $.dataset(this.data);quill.root.innerHTML=($.isObject(data)?data.inner:data)||""}if(this.onchange){this.element.querySelector(".ql-editor").addEventListener("blur",async()=>{this.onchange.call(this)})}});this.get=(()=>quill);this.getValue=(()=>{return{inner:quill.root.innerHTML}})}};let b="ccm."+component.name+(component.version?"-"+component.version.join("."):"")+".js";if(window.ccm&&null===window.ccm.files[b])return window.ccm.files[b]=component;(b=window.ccm&&window.ccm.components[component.name])&&b.ccm&&(component.ccm=b.ccm);"string"===typeof component.ccm&&(component.ccm={url:component.ccm});let c=(component.ccm.url.match(/(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)/)||["latest"])[0];if(window.ccm&&window.ccm[c])window.ccm[c].component(component);else{var a=document.createElement("script");document.head.appendChild(a);component.ccm.integrity&&a.setAttribute("integrity",component.ccm.integrity);component.ccm.crossorigin&&a.setAttribute("crossorigin",component.ccm.crossorigin);a.onload=function(){window.ccm[c].component(component);document.head.removeChild(a)};a.src=component.ccm.url}})();